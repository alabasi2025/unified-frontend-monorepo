<div class="notebook-detail-container" *ngIf="!loading && notebook">
  <!-- Header -->
  <div class="notebook-header">
    <div class="header-content">
      <div class="notebook-icon" [style.background-color]="notebook.color">
        {{ notebook.icon }}
      </div>
      <div class="notebook-info">
        <h1 *ngIf="!editMode" class="notebook-title">{{ notebook.title }}</h1>
        <input 
          *ngIf="editMode" 
          type="text" 
          [(ngModel)]="editForm.title" 
          class="edit-title-input"
          placeholder="ุนููุงู ุงูุฏูุชุฑ"
        />
        
        <p *ngIf="!editMode && notebook.description" class="notebook-description">
          {{ notebook.description }}
        </p>
        <textarea 
          *ngIf="editMode" 
          [(ngModel)]="editForm.description" 
          class="edit-description-input"
          placeholder="ูุตู ุงูุฏูุชุฑ (ุงุฎุชูุงุฑู)"
          rows="2"
        ></textarea>
        
        <div class="notebook-meta">
          <span class="meta-item">
            <i class="icon-user"></i>
            {{ notebook.user?.username || notebook.createdBy }}
          </span>
          <span class="meta-item">
            <i class="icon-clock"></i>
            ุขุฎุฑ ุชุญุฏูุซ: {{ lastUpdated ? getRelativeTime(lastUpdated) : 'ุบูุฑ ูุนุฑูู' }}
          </span>
        </div>
      </div>
    </div>
    
    <div class="header-actions">
      <button 
        *ngIf="!editMode" 
        class="btn btn-primary" 
        (click)="toggleEditMode()"
      >
        <i class="icon-edit"></i>
        ุชุนุฏูู
      </button>
      <button 
        *ngIf="editMode" 
        class="btn btn-success" 
        (click)="saveNotebook()"
        [disabled]="loading"
      >
        <i class="icon-save"></i>
        ุญูุธ
      </button>
      <button 
        *ngIf="editMode" 
        class="btn btn-secondary" 
        (click)="toggleEditMode()"
      >
        <i class="icon-x"></i>
        ุฅูุบุงุก
      </button>
      <button 
        *ngIf="!editMode" 
        class="btn btn-danger" 
        (click)="deleteNotebook()"
      >
        <i class="icon-trash"></i>
        ุญุฐู
      </button>
    </div>
  </div>

  <!-- Statistics -->
  <div class="statistics-section">
    <div class="stat-card">
      <div class="stat-icon">๐</div>
      <div class="stat-content">
        <div class="stat-value">{{ totalPages }}</div>
        <div class="stat-label">ุตูุญุฉ</div>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">๐</div>
      <div class="stat-content">
        <div class="stat-value">{{ totalWords }}</div>
        <div class="stat-label">ูููุฉ</div>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">๐</div>
      <div class="stat-content">
        <div class="stat-value">{{ sections.length }}</div>
        <div class="stat-label">ูุณู</div>
      </div>
    </div>
  </div>

  <!-- Content Tabs -->
  <div class="content-tabs">
    <div class="tabs-header">
      <button class="tab-btn active">
        <i class="icon-file-text"></i>
        ุงูุตูุญุงุช
      </button>
      <button class="tab-btn">
        <i class="icon-folder"></i>
        ุงูุฃูุณุงู
      </button>
    </div>

    <!-- Pages Section -->
    <div class="tab-content">
      <div class="section-header">
        <h2>ุงูุตูุญุงุช</h2>
        <button class="btn btn-primary btn-sm" (click)="createPage()">
          <i class="icon-plus"></i>
          ุตูุญุฉ ุฌุฏูุฏุฉ
        </button>
      </div>

      <div class="pages-grid" *ngIf="pages.length > 0">
        <div 
          *ngFor="let page of pages" 
          class="page-card"
          (click)="goToPage(page.id)"
        >
          <div class="page-card-header">
            <h3 class="page-title">{{ page.title }}</h3>
            <button 
              class="btn-icon btn-danger-icon" 
              (click)="deletePage(page, $event)"
              title="ุญุฐู"
            >
              <i class="icon-trash"></i>
            </button>
          </div>
          <div class="page-card-content">
            <p class="page-preview">{{ page.content.substring(0, 100) }}...</p>
          </div>
          <div class="page-card-footer">
            <span class="page-meta">
              <i class="icon-type"></i>
              {{ page.wordCount || 0 }} ูููุฉ
            </span>
            <span class="page-meta">
              <i class="icon-clock"></i>
              {{ getRelativeTime(new Date(page.updatedAt)) }}
            </span>
          </div>
        </div>
      </div>

      <div class="empty-state" *ngIf="pages.length === 0">
        <div class="empty-icon">๐</div>
        <h3>ูุง ุชูุฌุฏ ุตูุญุงุช ุจุนุฏ</h3>
        <p>ุงุจุฏุฃ ุจุฅูุดุงุก ุตูุญุฉ ุฌุฏูุฏุฉ ูุชุฏููู ุฃููุงุฑู ูููุงุญุธุงุชู</p>
        <button class="btn btn-primary" (click)="createPage()">
          <i class="icon-plus"></i>
          ุฅูุดุงุก ุฃูู ุตูุญุฉ
        </button>
      </div>
    </div>

    <!-- Sections Section -->
    <div class="tab-content" style="display: none;">
      <div class="section-header">
        <h2>ุงูุฃูุณุงู</h2>
        <button class="btn btn-primary btn-sm" (click)="createSection()">
          <i class="icon-plus"></i>
          ูุณู ุฌุฏูุฏ
        </button>
      </div>

      <div class="sections-list" *ngIf="sections.length > 0">
        <div *ngFor="let section of sections" class="section-item">
          <div class="section-icon">๐</div>
          <div class="section-info">
            <h4>{{ section.title }}</h4>
            <span class="section-meta">{{ section.createdAt | date:'short' }}</span>
          </div>
          <button 
            class="btn-icon btn-danger-icon" 
            (click)="deleteSection(section, $event)"
            title="ุญุฐู"
          >
            <i class="icon-trash"></i>
          </button>
        </div>
      </div>

      <div class="empty-state" *ngIf="sections.length === 0">
        <div class="empty-icon">๐</div>
        <h3>ูุง ุชูุฌุฏ ุฃูุณุงู ุจุนุฏ</h3>
        <p>ูุธู ุตูุญุงุชู ุจุฅูุดุงุก ุฃูุณุงู</p>
        <button class="btn btn-primary" (click)="createSection()">
          <i class="icon-plus"></i>
          ุฅูุดุงุก ุฃูู ูุณู
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Version Badge -->
<app-version-badge
  componentName="Notebook Detail"
  status="complete"
  [progress]="100"
  lastUpdate="2024-11-28"
  commitHash="d86ec20"
></app-version-badge>

<!-- Loading State -->
<div class="loading-container" *ngIf="loading">
  <div class="spinner"></div>
  <p>ุฌุงุฑู ุงูุชุญููู...</p>
</div>

<!-- Error State -->
<div class="error-container" *ngIf="error && !loading">
  <div class="error-icon">โ๏ธ</div>
  <h3>ุญุฏุซ ุฎุทุฃ</h3>
  <p>{{ error }}</p>
  <button class="btn btn-primary" (click)="loadNotebook(notebook?.id || '')">
    <i class="icon-refresh"></i>
    ุฅุนุงุฏุฉ ุงููุญุงููุฉ
  </button>
</div>
